<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.76.5"><title>稳定匹配问题 | ctbp</title><meta name=description content="Cyan's Blog"><link rel=stylesheet href=https://cyasts.github.io/css/index.css><link rel=stylesheet href=https://cyasts.github.io/css/classes.css><link rel=canonical href=https://cyasts.github.io/posts/stablematches/><link rel=alternate type=application/rss+xml href title=ctbp><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet></head><body><header class=menus><nav><a href=/>Home</a>
<a href=/about/>About</a></nav><nav class=fontawesome><a href=https://github.com/cyasts target=_blank><i title=GitHub class="fab fa-github"></i></a></nav><div class="hidden description">Cyan's Blog</div></header><article id=article><header><i class="fas fa-folder"></i><a href=/categories/algorithms>Algorithms</a>
&nbsp;<h1 style=text-align:center>稳定匹配问题</h1><div class=post-meta><time datetime=2020-09-16T15:20:00+08:00>September 16, 2020</time> &nbsp;
&nbsp;
<i class="far fa-clock"></i>4 min
53 s
&nbsp;</div></header><h1 id=1问题描述>1.问题描述</h1><p>给定 N 个男性 $ m_{1} $ ,⋯,$m_{n}$ 和 N 个女性$w_{1}$,⋯,$w_{n}$</p><ul><li>每个男性对女性由最喜欢到最不喜欢进行排序</li><li>每个女性对男性由最喜欢到最不喜欢进行排序</li></ul><p>目标：找到一个稳定的匹配使得不满意度最低。</p><h1 id=2输入>2.输入</h1><p>第一行输入 N，表示需要处理的匹配的对数。男性按照 1，2, 3&mldr;N 的编号表示，女性同样如此。<br>接下来 N 行，每行 N 个数字，表示该行男性对所有女性的好感度排名。<br>再接下来 N 行，每行 N 个数字，表示该行女性对所有男性的好感度排名。<br>例如：</p><pre><code>3
1 2 3
2 1 3
1 2 3
2 1 3
1 2 3
1 2 3
</code></pre><h1 id=3输出>3.输出</h1><p>输入 N 行，每行输出一个匹配的结果，格式为：</p><pre><code>m：编号
w：编号
</code></pre><p>例如：</p><pre><code>This is a block.
This is more of a block.
</code></pre><h1 id=4核心思想>4.核心思想</h1><p><img src=https://cdn.jsdelivr.net/gh/cyasts/image/main/imgs/20201012192818.png alt=20201012192818></p><h1 id=4算法实现>4.算法实现</h1><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">146
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#999;font-weight:700;font-style:italic>#include</span> <span style=color:#999;font-weight:700;font-style:italic>&lt;stdio.h&gt;</span><span style=color:#999;font-weight:700;font-style:italic>
</span><span style=color:#999;font-weight:700;font-style:italic>#include</span> <span style=color:#999;font-weight:700;font-style:italic>&lt;stdlib.h&gt;</span><span style=color:#999;font-weight:700;font-style:italic>
</span><span style=color:#999;font-weight:700;font-style:italic></span>
<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>input</span>();
<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>process</span>();
<span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>findfman</span>();
<span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>findpreorder</span>(<span style=color:#458;font-weight:700>int</span> index, <span style=color:#458;font-weight:700>int</span> o);
<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>output</span>();
<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>desource</span>();


<span style=color:#458;font-weight:700>int</span> N;
<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span> mancp;
<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span> womencp;
<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>**</span> man;
<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>**</span> women;

<span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>main</span>(<span style=color:#458;font-weight:700>int</span> argc, <span style=color:#458;font-weight:700>char</span> <span style=color:#000;font-weight:700>*</span>argv[])
{

<span style=color:#998;font-style:italic>//freopen(&#34;input.txt&#34;,&#34;r&#34;,stdin);
</span><span style=color:#998;font-style:italic>//freopen(&#34;output.txt&#34;,&#34;w&#34;, stdout);
</span><span style=color:#998;font-style:italic></span>

	scanf(<span style=color:#d14>&#34;%d&#34;</span>, <span style=color:#000;font-weight:700>&amp;</span>N);

	input();

	process();

	output();

	desource();

<span style=color:#998;font-style:italic>//fclose(stdin);
</span><span style=color:#998;font-style:italic>//fclose(stdout);
</span><span style=color:#998;font-style:italic></span>
	<span style=color:#000;font-weight:700>return</span> <span style=color:#099>0</span>;
}

<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>input</span>()
{
	<span style=color:#458;font-weight:700>int</span> i, j, k;


	man <span style=color:#000;font-weight:700>=</span> (<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>**</span>)malloc(<span style=color:#000;font-weight:700>sizeof</span>(<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span>) <span style=color:#000;font-weight:700>*</span> N);
	women <span style=color:#000;font-weight:700>=</span> (<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>**</span>)malloc(<span style=color:#000;font-weight:700>sizeof</span>(<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span>) <span style=color:#000;font-weight:700>*</span> N);

	mancp <span style=color:#000;font-weight:700>=</span> (<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span>)malloc(<span style=color:#000;font-weight:700>sizeof</span>(<span style=color:#458;font-weight:700>int</span>) <span style=color:#000;font-weight:700>*</span> N);
	womencp <span style=color:#000;font-weight:700>=</span> (<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span>)malloc(<span style=color:#000;font-weight:700>sizeof</span>(<span style=color:#458;font-weight:700>int</span>) <span style=color:#000;font-weight:700>*</span> N);

	<span style=color:#000;font-weight:700>for</span>(i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>i) {
		man[i] <span style=color:#000;font-weight:700>=</span> (<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span>)malloc(<span style=color:#000;font-weight:700>sizeof</span>(<span style=color:#458;font-weight:700>int</span>) <span style=color:#000;font-weight:700>*</span> N);
		women[i] <span style=color:#000;font-weight:700>=</span> (<span style=color:#458;font-weight:700>int</span> <span style=color:#000;font-weight:700>*</span>)malloc(<span style=color:#000;font-weight:700>sizeof</span>(<span style=color:#458;font-weight:700>int</span>) <span style=color:#000;font-weight:700>*</span> N);

		mancp[i] <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0</span>;
		womencp[i] <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0</span>;
	}

	<span style=color:#000;font-weight:700>for</span>(i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>i){
		<span style=color:#000;font-weight:700>for</span>(j<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; j<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>j){
			scanf(<span style=color:#d14>&#34;%d&#34;</span>, <span style=color:#000;font-weight:700>&amp;</span>k);
			man[i][k<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>] <span style=color:#000;font-weight:700>=</span> j<span style=color:#000;font-weight:700>+</span><span style=color:#099>1</span>;  <span style=color:#998;font-style:italic>//按照喜好优先级 顺序输入。第(i+1)喜欢的是第K个女生。k是女生编号，对应的下标应减一。
</span><span style=color:#998;font-style:italic></span>		}
	}

	<span style=color:#000;font-weight:700>for</span>(i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>i){
		<span style=color:#000;font-weight:700>for</span>(j<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; j<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>j)
		{
			scanf(<span style=color:#d14>&#34;%d&#34;</span>, <span style=color:#000;font-weight:700>&amp;</span>k);
			women[i][k<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>] <span style=color:#000;font-weight:700>=</span> j<span style=color:#000;font-weight:700>+</span><span style=color:#099>1</span>;
		}

	}
}

<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>process</span>()
{
	<span style=color:#458;font-weight:700>int</span> i, j, k;
	<span style=color:#458;font-weight:700>int</span> count <span style=color:#000;font-weight:700>=</span> N;
	<span style=color:#458;font-weight:700>int</span> o;

	<span style=color:#000;font-weight:700>while</span>(count) {
		o <span style=color:#000;font-weight:700>=</span> <span style=color:#099>1</span>;
		i <span style=color:#000;font-weight:700>=</span> findfman(N);
		j <span style=color:#000;font-weight:700>=</span> findpreorder(i, o);
		<span style=color:#000;font-weight:700>while</span>( womencp[j] <span style=color:#000;font-weight:700>!=</span> <span style=color:#099>0</span> <span style=color:#000;font-weight:700>&amp;&amp;</span> women[j][i] <span style=color:#000;font-weight:700>&gt;</span> women[j][womencp[j]<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>])
		{
			j <span style=color:#000;font-weight:700>=</span> findpreorder(i, <span style=color:#000;font-weight:700>++</span>o);
		}

		<span style=color:#000;font-weight:700>if</span> (womencp[j] <span style=color:#000;font-weight:700>==</span> <span style=color:#099>0</span>) {
			mancp[i] <span style=color:#000;font-weight:700>=</span> j <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>;
			womencp[j] <span style=color:#000;font-weight:700>=</span> i<span style=color:#000;font-weight:700>+</span><span style=color:#099>1</span>;
			count<span style=color:#000;font-weight:700>--</span>;
		} <span style=color:#000;font-weight:700>else</span> <span style=color:#000;font-weight:700>if</span>(women[j][i] <span style=color:#000;font-weight:700>&lt;</span> women[j][womencp[j]<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>]){
			mancp[womencp[j] <span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>] <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0</span>;
			mancp[i] <span style=color:#000;font-weight:700>=</span> j <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>;
			womencp[j] <span style=color:#000;font-weight:700>=</span> i<span style=color:#000;font-weight:700>+</span><span style=color:#099>1</span>;
		}
	}
}

<span style=color:#998;font-style:italic>//找到未分配的男性成员下标
</span><span style=color:#998;font-style:italic></span><span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>findfman</span>()
{
	<span style=color:#458;font-weight:700>int</span> i;
	<span style=color:#000;font-weight:700>for</span>(i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>i)
	{
		<span style=color:#000;font-weight:700>if</span> (mancp[i] <span style=color:#000;font-weight:700>==</span> <span style=color:#099>0</span>)
			<span style=color:#000;font-weight:700>return</span> i;
	}
}

<span style=color:#998;font-style:italic>//根据男性index下标找到第o个中意的女性
</span><span style=color:#998;font-style:italic></span><span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>findpreorder</span>(<span style=color:#458;font-weight:700>int</span> index, <span style=color:#458;font-weight:700>int</span> o)
{
	<span style=color:#458;font-weight:700>int</span> i;
	<span style=color:#000;font-weight:700>for</span>(i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>i) {
		<span style=color:#000;font-weight:700>if</span> (man[index][i] <span style=color:#000;font-weight:700>==</span> o)
			<span style=color:#000;font-weight:700>return</span> i;
	}
}

<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>output</span>()
{
	<span style=color:#458;font-weight:700>int</span> i;
	<span style=color:#000;font-weight:700>for</span>(i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span>N; <span style=color:#000;font-weight:700>++</span>i) {
		printf(<span style=color:#d14>&#34;m:%d w:%d</span><span style=color:#d14>\n</span><span style=color:#d14>&#34;</span>,i<span style=color:#000;font-weight:700>+</span><span style=color:#099>1</span>, mancp[i]);
	}
}

<span style=color:#458;font-weight:700>void</span> <span style=color:#900;font-weight:700>desource</span>()
{
	<span style=color:#458;font-weight:700>int</span> i;
	<span style=color:#000;font-weight:700>for</span> (i<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>; i<span style=color:#000;font-weight:700>&lt;</span><span style=color:#099>0</span>; <span style=color:#000;font-weight:700>++</span>i)
	{
		free(man[i]);
		free(women[i]);
	}
	free(man);
	free(women);
	free(mancp);
	free(womencp);
}

</code></pre></td></tr></table></div></div><h1 id=5测试数据>5.测试数据</h1><hr><p>第一组：
输入：</p><pre><code>3
1 2 3
2 1 3
1 2 3
2 1 3
1 2 3
1 2 3
</code></pre><p>输出：</p><pre><code>m:1 w:1
m:2 w:2
m:3 w:3
</code></pre><hr><p>第二组：
输入：</p><pre><code>10
2 5 4 7 3 6 9 8 10 1
3 2 1 4 5 9 6 10 8 7
5 4 9 10 1 3 2 8 7 6
3 8 7 2 5 4 9 1 10 6
6 4 9 5 3 1 8 7 2 10
6 1 2 8 3 9 10 5 7 4
7 3 10 9 1 8 6 2 5 4
10 8 2 9 1 3 6 7 4 5
9 1 6 10 7 8 2 3 5 4
8 10 2 7 3 1 6 9 5 4
4 6 1 7 10 5 9 8 3 2
1 2 4 3 8 9 6 10 5 7
2 1 8 10 4 3 6 9 7 5
3 1 7 4 5 2 6 8 10 9
6 7 9 4 3 1 10 5 2 8
4 1 2 8 10 9 3 5 7 6
7 3 8 9 1 10 5 2 6 4
10 4 2 3 1 8 6 7 9 5
5 2 6 10 7 8 1 3 9 4
7 1 2 8 3 10 6 9 5 4
</code></pre><p>输出：</p><pre><code>m:1 w:2
m:2 w:3
m:3 w:4
m:4 w:5
m:5 w:6
m:6 w:1
m:7 w:7
m:8 w:10
m:9 w:9
m:10 w:8
</code></pre><hr><footer><hr><time datetime=2020-10-01T18:01:23+08:00>update @ October 01, 2020</time><p></p><div class=post-tags><i class="fas fa-tags"></i><a href=/tags/%E7%AE%97%E6%B3%95>算法</a>
&nbsp;
<a href=/tags/c>C</a>
&nbsp;</div></footer><div class=comments></div></article></body><script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });

  var es = document.getElementsByTagName("pre");
  for (e of es) {
    e.style["backgroundColor"] = "#FBFBFB"
    e.style["lineHeight"] = "1rem"
    e.style["paddingTop"] = "0.7rem"
    e.style["paddingBottom"] = "0.5rem"
  }
</script><script type=text/javascript async src=https://cdn.mathjax.org/mathjax/latest/MathJax.js></script><div class=foot>&copy; 2019 - 2020 &#183;
<a href=/>Home</a> · Theme <a href=https://github.com/RainerChiang/simpleness>Simpleness</a> Powered by <a href=https://gohugo.io/>Hugo</a> &#183;
<a href=#><i class="fas fa-chevron-up"></i></a></div><script src=/js/lazyload.min.js></script><script>var lazyImage=new LazyLoad({container:document.getElementById('article')});</script></html>